<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:body>
        <ui:composition>

            <h:panelGroup rendered="#{empty request.remoteUser}">
                <h:link value="Home" outcome="index"/>
                <h:link value="Menu" outcome="MenuChoose"/>
                <h:link value="About" outcome="About"/>
                <h:link value="Contact" outcome="Contact"/>
            </h:panelGroup>
            <span id="RightMenu">
                <h:panelGroup rendered="#{empty request.remoteUser}">
                    <h:form>
                        <h:commandLink value="Log in" action="Log in"/>
                        <h:commandLink value="Register" action="Register"/>
                    </h:form>
                </h:panelGroup>
            </span>
            <!--Different navigation cases depending on the role of the logged in user -->
            <h:panelGroup rendered="#{facesContext.externalContext.isUserInRole('userNormal')}">
                <h:link value="Make an order" outcome="MakeOrder"/>
                <h:link value="Order history" outcome="OrderHistoryChoose"/>
            </h:panelGroup>

            <h:panelGroup rendered="#{facesContext.externalContext.isUserInRole('userCompany')}">
                <h:link value="Make an order" outcome="MakeOrder"/>
                <h:link value="Order history" outcome="OrderHistoryChoose"/>
            </h:panelGroup>
            <h:panelGroup rendered="#{facesContext.externalContext.isUserInRole('management')}">
                <h:link value="Manage users" outcome="ManageUsers"/>
                <h:link value="Manage menus/ inventory"  outcome="ManageMenus"/>
                <h:link value="View Statistics" outcome="ViewStatistics"/>
            </h:panelGroup>

            <ui:insert name="userMenu" >
                <h:panelGroup rendered="#{not empty request.remoteUser}">

                    <span id="RightMenu">
                        <h:form>
                            <h:commandLink value="#{user.name}" action="UserProfile"/>
                            <h:commandLink value="Log out" action="#{user.doLogout}"/>
                            <h:panelGroup rendered="#{facesContext.externalContext.isUserInRole('userNormal')}">
                                <h:commandLink value="Shopping cart" action="ShoppingCart"/>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{facesContext.externalContext.isUserInRole('userCompany')}">
                                <h:commandLink value="Shopping cart" action="ShoppingCart"/>
                            </h:panelGroup>

                        </h:form>
                    </span>
                </h:panelGroup>

                <hr></hr>
            </ui:insert>
        </ui:composition>
    </h:body>
</html>

