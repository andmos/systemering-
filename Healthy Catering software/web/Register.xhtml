<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      
      xmlns:p="http://primefaces.org/ui">
    <h:body>
        <ui:composition template="/template/template.xhtml">
            <ui:define name="content">
                
                    <h:form>
                        <table align="center">

                            <tr><td>Name</td><td><h:inputText id="newName" label="Name" required="true" value="#{user.name}"></h:inputText>
                                    <td width="100%"><h:message for="newName" style="color:red"/></td></td></tr>
                            <tr><td>Username</td><td><h:inputText id="newUsername" label="Username" required="true" value="#{user.username}"></h:inputText></td><td width="100%"><h:message for="newUsername" style="color:red" />
                                    <h:panelGroup rendered="#{user.errorPanelGroup}">
                                        <h:outputText style="color:red" value="Username already exists" rendered="#{user.error == -1}"></h:outputText>
                                    </h:panelGroup>
                                </td></tr>
                            <tr><td>Password</td><td><h:inputSecret id="newPassword" label="Password" required="true" value="#{user.password}"></h:inputSecret><td width="100%"><h:message for="newPassword" style="color:red" />
                                        <h:panelGroup rendered="#{user.errorPanelGroup}">
                                            <h:outputText style="color:red" value="The password does not match" rendered="#{user.error == 1}"></h:outputText>
                                            <h:outputText style="color:red" value="The new password has the wrong length" rendered="#{user.error == 4}"></h:outputText>
                                            <h:outputText style="color:red" value="The password does not contain numbers" rendered="#{user.error == 3}"></h:outputText>
                                        </h:panelGroup>
                                    </td></td></tr>
                            <tr><td>Confirm Password</td><td><h:inputSecret id="newPasswordConfirmed" label="Confirm Password" required="true" value="#{user.newPasswordConfirmed}"></h:inputSecret><td width="100%"><h:message for="newPasswordConfirmed" style="color:red" /></td>
                                    <h:panelGroup rendered="#{user.errorPanelGroup}">
                                        <h:outputText style="color:red" value="The password does not match" rendered="#{user.error == 1}"></h:outputText>
                                    </h:panelGroup>
                                </td></tr>
                            <tr><td>Address</td><td><h:inputText id="newAddress" label="Address" required="true" value="#{user.address}"></h:inputText><td width="100%"><h:message for="newAddress" style="color:red" /></td></td></tr>
                            <tr><td>Company?</td>
                                <td><h:selectBooleanCheckbox value="#{user.isCompany}"></h:selectBooleanCheckbox></td>
                            </tr>
                            </table>
                            <p:commandButton value="Register new user" action="#{user.newUser()}" ajax="false"/>
                                    <h:panelGroup rendered="#{user.errorPanelGroup}">
                                        <h:outputText style="color:green" value="You are now registered." rendered="#{user.error==0}"></h:outputText>
                                    </h:panelGroup>
                                
                        
                    </h:form>

                
            </ui:define>
        </ui:composition> 
    </h:body>
</html>